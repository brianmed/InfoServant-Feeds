<!DOCTYPE html>
<html>
<head>
    <title>InfoServant</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/jmobile/jquery.mobile-1.3.1.min.css" />
    <script src="/jquery-1.10.1.min.js"></script>
    <script src="/jmobile/jquery.mobile-1.3.1.min.js"></script>
</head>
<body>

<div data-role="page" class=ui-responsive-panel>

    <div data-role="header">
        <h1>Entries</h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
        <a href="#profile-form" data-icon="plus" data-iconpos="notext">Proflie</a>
    </div><!-- /header -->

    <div data-role="content">
        <h2>Panel: Menu + form</h2>

        <p>This is a typical page that has two buttons in the header bar that open panels. The left button opens a left menu with the reveal display mode. The right button opens a form in a right overlay panel.</p>
        
        <p>Since the panel links are in the top bar, there really isn't a need for the fixed positioning feature on the panel since you will always be scrolled to the top of the page. The fixed positioning impacts animation smoothness so it's off in this demo (<code>data-position-fixed="false"</code>) and the panel will scroll with the page.</p>
        
        <p>To make this responsive, the left panel stays open and causes the page to re-flow at wider widths. This allows both the menu and page to be used together when more space is available. This behavior is controlled by CSS media queries. You can create a custom one for a specific breakpoint or use the breakpoint preset by adding the <code> class="ui-responsive-panel"</code> to the page container.</p>

    </div><!-- /content -->

            <style>
                .nav-search .ui-btn-up-a {
                    background-image:none;
                    background-color:#333333;
                }
                .nav-search .ui-btn-inner {
                    border-top: 1px solid #888;
                    border-color: rgba(255, 255, 255, .1);
                }
            </style>

                <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">

                    <ul data-role="listview" data-theme="a" data-divider-theme="a" style="margin-top:-16px;" class="nav-search">
                        <li data-icon="delete" style="background-color:#111;">
                            <a href="#" data-rel="close">Close menu</a>
                        </li>
                        <li data-filtertext="wai-aria voiceover accessibility screen reader">
                            <a href="../about/accessibility.html">Accessibility</a>
                        </li>
                        <li data-filtertext="accordions collapsible set collapsible-set collapsed">
                            <a href="../content/content-collapsible-set.html">Accordions</a>
                        </li>
                        <li data-filtertext="ajax navigation model">
                            <a href="../pages/page-navmodel.html">Ajax navigation model</a>
                        </li>
                        <li data-filtertext="anatomy of page viewport">
                            <a href="../pages/page-anatomy.html">Anatomy of a page</a>
                        </li>
                        <li data-filtertext="events api animationComplete transition css">
                            <a href="../api/events.html">Animation events</a>
                        </li>
                        <li data-filtertext="listview autodivider">
                            <a href="../lists/lists-autodividers.html">Automatic listview dividers</a>
                        </li>
                        <li data-filtertext="button link submit cancel image reset mini buttonmarkup enable disable">
                            <a href="../buttons/buttons-types.html">Buttons</a>
                        </li>
                        <li data-filtertext="button icon">
                            <a href="../buttons/buttons-icons.html">Button icons</a>
                        </li>
                        <li data-filtertext="data-prefetch loadpage domCache data-dom-cache size clear cleanup pagehide lazyload spinner loader">
                            <a href="../pages/page-cache.html">Caching pages</a>
                        </li>
                        <li data-filtertext="input forms multi select checkbox checks grouped horizontal toggle legend">
                            <a href="../forms/checkboxes/">Checkbox</a>
                        </li>
                        <li data-filtertext="button icon">
                            <a href="buttons/buttons-icons.html">Button icons</a>
                        </li>
                        <li data-filtertext="data-prefetch loadpage domCache data-dom-cache size clear cleanup pagehide lazyload spinner loader">
                            <a href="../pages/page-cache.html">Caching pages</a>
                        </li>
                        <li data-filtertext="input forms multi select checkbox checks grouped horizontal toggle legend">
                            <a href="../forms/checkboxes/">Checkbox</a>
                        </li>
                    </ul>

                    <!-- panel content goes here -->
                </div><!-- /panel -->

                <style>
                    .userform { padding:.8em 1.2em; }
                    .userform h2 { color:#555; margin:0.3em 0 .8em 0; padding-bottom:.5em; border-bottom:1px solid rgba(0,0,0,.1); }
                    .userform label { display:block; margin-top:1.2em; }
                    .switch .ui-slider-switch { width: 6.5em !important }
                    .ui-grid-a { margin-top:1em; padding-top:.8em; margin-top:1.4em; border-top:1px solid rgba(0,0,0,.1); }
                </style>

                <div data-role="panel" data-position="right" data-position-fixed="false" data-display="overlay" id="profile-form" data-theme="b">

                    <form class="userform">
                        <h2>Create new user</h2>
                        <label for="name">Name</label>
                        <input type="text" name="name" id="name" value="" data-clear-btn="true" data-mini="true">

                        <label for="email">Email</label>
                        <input type="email" name="email" id="status" value="" data-clear-btn="true" data-mini="true">

                        <label for="password">Password:</label>
                        <input type="password" name="password" id="password" value="" data-clear-btn="true" autocomplete="off" data-mini="true">

                        <div class="switch">
                        <label for="status">Status</label>
                        <select name="status" id="slider" data-role="slider" data-mini="true">
                            <option value="off">Inactive</option>
                            <option value="on">Active</option>
                        </select>
                        </div>

                        <div class="ui-grid-a">
                            <div class="ui-block-a"><a href="#" data-rel="close" data-role="button" data-theme="c" data-mini="true">Cancel</a></div>
                            <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Save</a></div>
                        </div>
                    </form>

                    <!-- panel content goes here -->
                </div><!-- /panel -->

    <div data-role="footer" data-id="foo1" data-position="fixed">
    <div data-role="navbar">
        <ul>
            <li><a href="/logout" data-rel="external">Logout</a></li>
            <li><a href="mailto:support@infoservant.com">Contact</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>

[% STOP %]

<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <script src="jquery-1.10.1.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    [% UNLESS h.is_mobile %]
	<script src="/viewer/tinymce/js/tinymce/tinymce.min.js"></script>
    [% END %]
</head>
<body>

  <div class="navbar navbar-inverse">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand visible-desktop hidden-phone hidden-tablet" href="/">InfoServant</a>
          <ul class="nav pull-right visible-desktop hidden-phone hidden-tablet">
            <li><a href="/logout">Logout</a></li>
            <li><a href="mailto:support@infoservant.com">Contact</a></li>
          </ul>
          <ul class="nav hidden-desktop visible-phone visible-tablet">
            <li><a href="/logout">Logout</a></li>
            <li><a href="mailto:support@infoservant.com">Contact</a></li>
          </ul>
      </div>
    </div><!-- /navbar-inner -->
  </div><!-- /navbar -->


    <div class="tabbable"> <!-- Only required for left/right tabs -->
    <ul id="main_tab" class="nav nav-tabs">
    <li class="active"><a href="#tab_entries" data-toggle="tab">Entries</a></li>
    <li><a href="#tab_feeds" data-toggle="tab">Feeds</a></li>
    <li><a href="#tab_profile" data-toggle="tab">Profile</a></li>
    </ul>
    <div class="tab-content">
    <div class="tab-pane active" id="tab_entries">

            <ul id=the_entries class="nav nav-list">
              [% IF have_entries %]
              [% FOREACH entry IN entries %]
              <li><a href='javascript:void(0)' onClick="showEntry(this, [% entry.feed_id %],  '[% entry.entry_id %]');">[% entry.title | html %]</a></li>
              [% END %]
              [% END %]
            </ul>

            [% IF have_entries %]
            [% UNLESS offset %]
            <button class="btn btn-primary disabled">Prev</button>
            [% END %]
            [% IF offset %]
            [% SET page_prev = offset - 30 %]
            <button class="btn btn-primary" onClick="javascript:location.href = '/dashboard?offset=[% page_prev %]'; location.reload;">Prev</button>
            [% END %]
            [% SET page_next = offset + 30 %]
            <button class="btn btn-primary" onClick="javascript:location.href = '/dashboard?offset=[% page_next %]'; location.reload;">Next</button>
            [% END %]

    </div>
    <div class="tab-pane" id="tab_feeds">

            <ul class="nav nav-list">
              [% IF have_feeds %]
              [% FOREACH feed IN feeds %]
              <li id="li_feed[% feed.id %]"><a href="javascript:void(0)" onClick="showFeed([% feed.id %]);">[% feed.name | html %]</a></li>
              [% END %]
              [% END %]
            </ul>

    </div>
    <div class="tab-pane" id="tab_profile">

        <div class="well" id=profileBody></div>

    </div>
    </div>
  </div>

        <script>
        $.ajaxSetup ({  
            cache: false,
            async: false
        });

        function loadHtml(link, script) {
            var id = '#li_' + link;
            $(".active").removeClass("active");
            $(id).addClass("active");

            $("#htmlBody").load("/dashboard/html/" + link);
            $.getScript("/dashboard/javascript/" + link);
            if (script) {
                script = unescape(script);
                eval(script);
            }
        }

        function showProfile() {
            $("#profileBody").load("/dashboard/html/profile");
            $.getScript("/dashboard/javascript/profile");
        }

        function showEntry(link, feed_nbr, entry_id) {
            $("#htmlBody").remove();
            $(link.parentElement).append("<div id=htmlBody></div>");

            $("#htmlBody").load("/dashboard/feed/src/" + feed_nbr + "?entry_id=" + entry_id);

            [% UNLESS h.is_mobile %]
            tinymce.init({selector:'textarea', readonly: 1, menubar: "false", plugins: "fullscreen", toolbar: "fullscreen"});
            [% END %]
        }

        function showFeed(feed_nbr) {
            var id = '#li_feed' + feed_nbr;

            $("#feed_entries").remove();

            if ("active" == $(id).attr("class")) {
                $(id).removeClass("active");
                return;
            }

            $("li.active").removeClass("active");
            $(id).addClass("active");

            $.ajax({
                url: "/dashboard/feed/entries/" + feed_nbr,
                success: function(data) { 
                    $(id).append('<ol id=feed_entries>');
                    for (var i=0; i<data.length; i++) {
                        var entry = data[i];
                        var link = "<li><a href='javascript:void(0)' onClick=\"showEntry(" + feed_nbr + ", '" + entry.entry_id + "');\">" + entry.title + "</a>";
                        $('#feed_entries').append(link);
                    }
                    $(id).append('</ol>');
                },
            });
        }

        $('#main_tab a[href="#tab_profile"]').click(function (e) {
            e.preventDefault();
            $(this).tab('show');

            showProfile();
        })
        </script>
</body>
</html>
